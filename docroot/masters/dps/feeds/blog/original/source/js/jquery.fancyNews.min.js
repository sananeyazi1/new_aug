/*!
 * Fancy News v2.0
 *
 * Copyright 2011, Rafael Dery
 *
 * Only for sale at the envato marketplaces
 */

(function(f){function q(e,a){var f=e.split(" "),b="";if(f.length>a){for(var k=0;k<a;++k)b+=f[k]+" ";return b}return e}jQuery.fn.fancyNews=function(e){function a(c,a,b,e,f){a=void 0!=a&&""!=a?"<h4>"+a+"</h4>":"";f=void 0!=f&&""!=f?'<img src="'+f+'" />':"";u.push(e);c=m.append('<li class="fn-preview fn-clearfix" style="background:'+d.backgroundColor+';" data-index="'+m.children("li").size()+'">'+f+"<div><h3>"+c+"</h3>"+a+"<p>"+b+"</p></div></li>").children("li:last");d.vertical?c.css({width:s,left:(s+ d.offset)*(m.children("li").size()-1)}):c.css({height:s,marginBottom:d.offset});c.fadeIn(100+300*m.children("li").size())}function g(){d.onListCreated.call();c.children(".fn-preloader").hide();c.after('<div class="fn-navigation fn-clearfix" style="width:'+d.width+"px; background:"+d.backgroundColor+'"><span class="fn-post-count">1 - '+d.previewsPerPage+'</span><a href="#" class="fn-close-button"></a></div>');n=c.next(".fn-navigation");!d.arrows&&(d.infiniteLoop&&d.useLinks)&&n.hide();d.vertical&& n.addClass("fn-vertical").css("width",d.width+d.offset*d.previewsPerPage);if(d.arrows){var a=d.vertical?'<a href="#" class="fn-next-button"></a><a href="#" class="fn-previous-button"></a>':'<a href="#" class="fn-previous-button"></a><a href="#" class="fn-next-button"></a>';n.children("span:first").after(a)}d.infiniteLoop&&n.children(".fn-post-count").hide();n.children(".fn-previous-button, .fn-next-button").click(function(){l();h();d.vertical?f(this).hasClass("fn-previous-button")?k("right"):k("left"): f(this).hasClass("fn-previous-button")?k("up"):k("down");return!1});n.children(".fn-close-button").click(function(){b();c.children(".fn-full-post").fadeOut(200,function(){f(this).children("div").mCustomScrollbar("destroy");l()});return!1});m.delegate("li","mouseover",function(){f(this).stop().animate({opacity:1,backgroundColor:d.backgroundOverColor},800)}).delegate("li","mouseout",function(){f(this).stop().animate({opacity:1,backgroundColor:d.backgroundColor},500)}).delegate("li","click",function(){var a= f(this),e=u[parseInt(a.data("index"))];if(d.useLinks)void 0==e||""==e?alert("No link given!"):window.open(e,d.targetWindow);else{b();c.children(".fn-preloader").show();var g=c.children(".fn-full-post");g.fadeIn(500,function(){l()}).children("h3").text(a.children("div").children("h3").text()).parent().children("div").html(e).fadeOut(0);a=g.children("h3").height()+parseInt(g.children("h3").css("marginTop"))+parseInt(g.children("h3").css("marginBottom"));g.children("div").height(g.height()-a).find("img").imagesLoaded(function(){g.children("div").stop().fadeIn(300).mCustomScrollbar({mouseWheelPixels:120}); c.children(".fn-preloader").fadeOut(200)})}});d.slideTime&&(m.hover(function(){l()},function(){h()}),f(window).blur(l),f(window).focus(h),h())}function b(){n.children(".fn-previous-button").is(":hidden")?(n.children(".fn-previous-button, .fn-next-button").show(),n.children(".fn-close-button").hide()):(n.children(".fn-previous-button, .fn-next-button").hide(),n.children(".fn-close-button").show())}function k(c){if(m.is(":animated"))return!1;var a=m.children("li").size();if(d.vertical)if("undefined"=== typeof c&&(c="left"),"left"==c){if(Math.round(a*j+parseFloat(m.position().left))>m.width()||d.infiniteLoop)m.animate({left:"-="+j},500,function(){if(d.infiniteLoop){var c=m.children("li:first").remove(),a=parseFloat(m.children("li:last").css("left"));m.append(c);c.css("left",a+j)}}),++r,n.children(".fn-post-count").text(r+1+" - "+(d.previewsPerPage+r))}else{if(0!=parseFloat(m.position().left)||d.infiniteLoop)d.infiniteLoop&&(c=m.children("li:last").remove(),a=parseFloat(m.children("li:first").css("left")), m.prepend(c),c.css("left",a-j)),m.animate({left:"+="+j},500),--r,n.children(".fn-post-count").text(r+1+" - "+(d.previewsPerPage+r))}else if("undefined"===typeof c&&(c="down"),"down"==c){if(Math.round(a*j+parseFloat(m.position().top))>m.height()||d.infiniteLoop)m.animate({top:"-="+j},500,function(){if(d.infiniteLoop){var c=m.children("li:first").remove();m.append(c).css("top","+="+j)}}),++r,n.children(".fn-post-count").text(r+1+" - "+(d.previewsPerPage+r))}else if(0!=parseFloat(m.position().top)|| d.infiniteLoop)d.infiniteLoop&&(c=m.children("li:last").remove(),m.prepend(c).css("top","-="+j)),m.animate({top:"+="+j},500),--r,n.children(".fn-post-count").text(r+1+" - "+(d.previewsPerPage+r))}function h(){d.slideTime&&void 0==v&&(v=setInterval(k,d.slideTime))}function l(){d.slideTime&&void 0!=v&&(clearInterval(v),v=void 0)}var d=f.extend({},f.fn.fancyNews.defaults,e),c,p,m,n,s,j,v,u=[],r=0;return this.each(function(){c=f(this).addClass("fn-container");p=c.children("div").remove();d.vertical&& c.addClass("fn-vertical");c.css({overflow:"hidden",position:"relative",width:d.vertical?d.width+d.offset*d.previewsPerPage:d.width,height:d.vertical?d.height:d.height+d.offset*d.previewsPerPage}).append('<ul class="fn-news-list"></ul>').append("<div class='fn-preloader'></div>").append("<div class='fn-full-post' style='height:"+c.height()+"px; background:"+d.backgroundColor+"'><h3></h3><div></div></div>");m=c.children(".fn-news-list");c.find(".fn-preloader").css({top:0.5*d.height-0.5*c.find(".fn-preloader").height(), left:0.5*d.width-0.5*c.find(".fn-preloader").width()});s=d.vertical?d.width/d.previewsPerPage:d.height/d.previewsPerPage;j=s+d.offset;if(d.feed){var b="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+d.feed+"?"+(new Date).getTime()+"&num="+d.numOfEntries;f.getJSON(b,function(b){if(200==b.responseStatus){b=b.responseData.feed;for(var e=0;e<b.entries.length;e++){var f=b.entries[e];a(f.title,String(f.publishedDate).substr(0,16),q(f.content.replace(/(<([^>]+)>)/ig,""),d.maxWords)+ "[....]",d.useLinks?f.link:f.content)}g()}else c.append('<p class="fn-error"><strong>Error!</strong> The URL of the RSS feed is not correct.</p>')})}else{for(b=0;b<p.length;++b)a(0<f(p[b]).children("span").attr("title").length?f(p[b]).find("span").attr("title"):"",p[b].title,q(f(p[b]).children("span").text(),d.maxWords)+"[....]",d.useLinks?f(p[b]).data("link"):f(p[b]).children("span").html(),f(p[b]).children("img").attr("src"));g()}})};f.fn.fancyNews.defaults={width:500,height:420,offset:2,maxWords:55, previewsPerPage:3,numOfEntries:10,slideTime:0,feed:"",backgroundColor:"#1A1A1A",backgroundOverColor:"#0C0C0C",useLinks:!1,targetWindow:"_blank",infiniteLoop:!1,arrows:!0,vertical:!1,onListCreated:function(){}}})(jQuery); (function(f){function q(a){var b=a||window.event,e=[].slice.call(arguments,1),h=0,l=0,d=0;return a=f.event.fix(b),a.type="mousewheel",b.wheelDelta&&(h=b.wheelDelta/120),b.detail&&(h=-b.detail/3),d=h,void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(d=0,l=-1*h),void 0!==b.wheelDeltaY&&(d=b.wheelDeltaY/120),void 0!==b.wheelDeltaX&&(l=-1*b.wheelDeltaX/120),e.unshift(a,h,l,d),(f.event.dispatch||f.event.handle).apply(this,e)}var e=["DOMMouseScroll","mousewheel"];if(f.event.fixHooks)for(var a=e.length;a;)f.event.fixHooks[e[--a]]= f.event.mouseHooks;f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=e.length;a;)this.addEventListener(e[--a],q,!1);else this.onmousewheel=q},teardown:function(){if(this.removeEventListener)for(var a=e.length;a;)this.removeEventListener(e[--a],q,!1);else this.onmousewheel=null}};f.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery); (function(f){var q={init:function(e){e=f.extend(!0,{set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:550,scrollEasing:"easeOutCirc",mouseWheel:"pixels",mouseWheelPixels:60,autoDraggerLength:!0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:20,scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0},callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){}, onTotalScrollOffset:0,whileScrolling:!1,whileScrollingInterval:30}},e);f(document).data("mCS-is-touch-device",!1);"ontouchstart"in window&&f(document).data("mCS-is-touch-device",!0);return this.each(function(){var a=f(this);e.set_width&&a.css("width",e.set_width);e.set_height&&a.css("height",e.set_height);if(f(document).data("mCustomScrollbar-index")){var g=parseInt(f(document).data("mCustomScrollbar-index"));f(document).data("mCustomScrollbar-index",g+1)}else f(document).data("mCustomScrollbar-index", "1");a.wrapInner("<div class='mCustomScrollBox' id='mCSB_"+f(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+f(document).data("mCustomScrollbar-index"));var b=a.children(".mCustomScrollBox");e.horizontalScroll?(b.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />"),g=b.children(".mCSB_h_wrapper"),g.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:g.children().outerWidth(), position:"relative"}).unwrap()):b.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var k=b.children(".mCSB_container");f(document).data("mCS-is-touch-device")&&k.addClass("mCS_touch");k.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer' style='position:relative;'><div class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>"); var g=b.children(".mCSB_scrollTools"),h=g.children(".mCSB_draggerContainer").children(".mCSB_dragger");e.horizontalScroll?h.data("minDraggerWidth",h.width()):h.data("minDraggerHeight",h.height());e.scrollButtons.enable&&(e.horizontalScroll?g.prepend("<a class='mCSB_buttonLeft' style='display:block; position:relative;'></a>").append("<a class='mCSB_buttonRight' style='display:block; position:relative;'></a>"):g.prepend("<a class='mCSB_buttonUp' style='display:block; position:relative;'></a>").append("<a class='mCSB_buttonDown' style='display:block; position:relative;'></a>")); b.bind("scroll",function(){a.is(".mCS_disabled")||b.scrollTop(0).scrollLeft(0)});a.data({mCS_Init:!0,horizontalScroll:e.horizontalScroll,scrollInertia:e.scrollInertia,scrollEasing:e.scrollEasing,mouseWheel:e.mouseWheel,mouseWheelPixels:e.mouseWheelPixels,autoDraggerLength:e.autoDraggerLength,scrollButtons_enable:e.scrollButtons.enable,scrollButtons_scrollType:e.scrollButtons.scrollType,scrollButtons_scrollSpeed:e.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:e.scrollButtons.scrollAmount,autoExpandHorizontalScroll:e.advanced.autoExpandHorizontalScroll, autoScrollOnFocus:e.advanced.autoScrollOnFocus,onScrollStart_Callback:e.callbacks.onScrollStart,onScroll_Callback:e.callbacks.onScroll,onTotalScroll_Callback:e.callbacks.onTotalScroll,onTotalScrollBack_Callback:e.callbacks.onTotalScrollBack,onTotalScroll_Offset:e.callbacks.onTotalScrollOffset,whileScrolling_Callback:e.callbacks.whileScrolling,whileScrolling_Interval:e.callbacks.whileScrollingInterval,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_buttonsContinuous_y:!1, bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_scrollbar_touch:!1,bindEvent_content_touch:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1,whileScrolling:!1}).mCustomScrollbar("update");e.horizontalScroll?"none"!==a.css("max-width")&&(e.advanced.updateOnContentResize||(e.advanced.updateOnContentResize=!0),a.data({mCS_maxWidth:parseInt(a.css("max-width")),mCS_maxWidth_Interval:setInterval(function(){k.outerWidth()> a.data("mCS_maxWidth")&&(clearInterval(a.data("mCS_maxWidth_Interval")),a.mCustomScrollbar("update"))},150)})):"none"!==a.css("max-height")&&a.data({mCS_maxHeight:parseInt(a.css("max-height")),mCS_maxHeight_Interval:setInterval(function(){b.css("max-height",a.data("mCS_maxHeight"));k.outerHeight()>a.data("mCS_maxHeight")&&(clearInterval(a.data("mCS_maxHeight_Interval")),a.mCustomScrollbar("update"))},150)});if(e.advanced.updateOnBrowserResize){var l;f(window).resize(function(){l&&clearTimeout(l); l=setTimeout(function(){!a.is(".mCS_disabled")&&!a.is(".mCS_destroyed")&&a.mCustomScrollbar("update")},150)})}if(e.advanced.updateOnContentResize){var d=e.horizontalScroll?k.outerWidth():k.outerHeight();setInterval(function(){if(e.horizontalScroll){e.advanced.autoExpandHorizontalScroll&&k.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:k.outerWidth(),position:"relative"}).unwrap();var c=k.outerWidth()}else c= k.outerHeight();c!=d&&(a.mCustomScrollbar("update"),d=c)},300)}})},update:function(){var e=f(this),a=e.children(".mCustomScrollBox"),g=a.children(".mCSB_container");g.removeClass("mCS_no_scrollbar");e.removeClass("mCS_disabled mCS_destroyed");a.scrollTop(0).scrollLeft(0);var b=a.children(".mCSB_scrollTools"),k=b.children(".mCSB_draggerContainer"),h=k.children(".mCSB_dragger");if(e.data("horizontalScroll")){var l=b.children(".mCSB_buttonLeft"),d=b.children(".mCSB_buttonRight"),c=a.width();e.data("autoExpandHorizontalScroll")&& g.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:g.outerWidth(),position:"relative"}).unwrap();var p=g.outerWidth()}else var m=b.children(".mCSB_buttonUp"),n=b.children(".mCSB_buttonDown"),s=a.height(),j=g.outerHeight();j>s&&!e.data("horizontalScroll")?(b.css("display","block"),c=k.height(),e.data("autoDraggerLength")&&(p=Math.round(s/j*c),b=h.data("minDraggerHeight"),p<=b?h.css({height:b}):p>=c-10?h.css({height:c- 10}):h.css({height:p}),h.children(".mCSB_dragger_bar").css({"line-height":h.height()+"px"})),p=h.height(),e.data("scrollAmount",(j-s)/(c-p)).mCustomScrollbar("scrolling",a,g,k,h,m,n,l,d),a=Math.abs(Math.round(g.position().top)),e.mCustomScrollbar("scrollTo",a,{callback:!1})):p>c&&e.data("horizontalScroll")?(b.css("display","block"),s=k.width(),e.data("autoDraggerLength")&&(j=Math.round(c/p*s),b=h.data("minDraggerWidth"),j<=b?h.css({width:b}):j>=s-10?h.css({width:s-10}):h.css({width:j})),j=h.width(), e.data("scrollAmount",(p-c)/(s-j)).mCustomScrollbar("scrolling",a,g,k,h,m,n,l,d),a=Math.abs(Math.round(g.position().left)),e.mCustomScrollbar("scrollTo",a,{callback:!1})):(a.unbind("mousewheel focusin"),e.data("horizontalScroll")?h.add(g).css("left",0):h.add(g).css("top",0),b.css("display","none"),g.addClass("mCS_no_scrollbar"),e.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}))},scrolling:function(e,a,g,b,k,h,l,d){var c=f(this);c.mCustomScrollbar("callbacks","whileScrolling");if(!b.hasClass("ui-draggable")){var p= c.data("horizontalScroll")?"x":"y";b.draggable({axis:p,containment:"parent",drag:function(){c.mCustomScrollbar("scroll");b.addClass("mCSB_dragger_onDrag")},stop:function(){b.removeClass("mCSB_dragger_onDrag")}})}c.data("bindEvent_scrollbar_click")||(g.bind("click",function(a){if(c.data("horizontalScroll")){if(a=a.pageX-g.offset().left,a<b.position().left||a>b.position().left+b.width())a>=g.width()-b.width()&&(a=g.width()-b.width()),b.css("left",a),c.mCustomScrollbar("scroll")}else if(a=a.pageY-g.offset().top, a<b.position().top||a>b.position().top+b.height())a>=g.height()-b.height()&&(a=g.height()-b.height()),b.css("top",a),c.mCustomScrollbar("scroll")}),c.data({bindEvent_scrollbar_click:!0}));if(c.data("mouseWheel")){var m=c.data("mouseWheel");"auto"===c.data("mouseWheel")&&(m=8,p=navigator.userAgent,-1!=p.indexOf("Mac")&&(-1!=p.indexOf("Safari")&&-1!=p.indexOf("AppleWebKit")&&-1==p.indexOf("Chrome"))&&(m=1));c.data("bindEvent_mousewheel")||(e.bind("mousewheel",function(e,f){e.preventDefault();var d= Math.abs(f*m);if(c.data("horizontalScroll"))if("pixels"===c.data("mouseWheel"))f=0>f?-1:1,d=Math.abs(Math.round(a.position().left))-f*c.data("mouseWheelPixels"),c.mCustomScrollbar("scrollTo",d);else{d=b.position().left-f*d;b.css("left",d);0>b.position().left&&b.css("left",0);var d=g.width(),j=b.width();b.position().left>d-j&&b.css("left",d-j);c.mCustomScrollbar("scroll")}else"pixels"===c.data("mouseWheel")?(f=0>f?-1:1,d=Math.abs(Math.round(a.position().top))-f*c.data("mouseWheelPixels"),c.mCustomScrollbar("scrollTo", d)):(d=b.position().top-f*d,b.css("top",d),0>b.position().top&&b.css("top",0),d=g.height(),j=b.height(),b.position().top>d-j&&b.css("top",d-j),c.mCustomScrollbar("scroll"))}),c.data({bindEvent_mousewheel:!0}))}if(c.data("scrollButtons_enable"))if("pixels"===c.data("scrollButtons_scrollType")){var n;f.browser.msie&&9>parseInt(f.browser.version)&&c.data("scrollInertia",0);c.data("horizontalScroll")?(d.add(l).unbind("mousedown touchstart onmsgesturestart mouseup mouseout touchend onmsgestureend",s,j), c.data({bindEvent_buttonsContinuous_x:!1}),c.data("bindEvent_buttonsPixels_x")||(d.bind("click",function(b){b.preventDefault();a.is(":animated")||(n=Math.abs(a.position().left)+c.data("scrollButtons_scrollAmount"),c.mCustomScrollbar("scrollTo",n))}),l.bind("click",function(b){b.preventDefault();a.is(":animated")||(n=Math.abs(a.position().left)-c.data("scrollButtons_scrollAmount"),a.position().left>=-c.data("scrollButtons_scrollAmount")&&(n="left"),c.mCustomScrollbar("scrollTo",n))}),c.data({bindEvent_buttonsPixels_x:!0}))): (h.add(k).unbind("mousedown touchstart onmsgesturestart mouseup mouseout touchend onmsgestureend",s,j),c.data({bindEvent_buttonsContinuous_y:!1}),c.data("bindEvent_buttonsPixels_y")||(h.bind("click",function(b){b.preventDefault();a.is(":animated")||(n=Math.abs(a.position().top)+c.data("scrollButtons_scrollAmount"),c.mCustomScrollbar("scrollTo",n))}),k.bind("click",function(b){b.preventDefault();a.is(":animated")||(n=Math.abs(a.position().top)-c.data("scrollButtons_scrollAmount"),a.position().top>= -c.data("scrollButtons_scrollAmount")&&(n="top"),c.mCustomScrollbar("scrollTo",n))}),c.data({bindEvent_buttonsPixels_y:!0})))}else if(c.data("horizontalScroll")){if(d.add(l).unbind("click"),c.data({bindEvent_buttonsPixels_x:!1}),!c.data("bindEvent_buttonsContinuous_x")){d.bind("mousedown touchstart onmsgesturestart",function(b){b.preventDefault();b.stopPropagation();c.data({mCSB_buttonScrollRight:setInterval(function(){var b=Math.round((Math.abs(Math.round(a.position().left))+c.data("scrollButtons_scrollSpeed"))/ c.data("scrollAmount"));c.mCustomScrollbar("scrollTo",b,{moveDragger:!0})},30)})});var s=function(a){a.preventDefault();a.stopPropagation();clearInterval(c.data("mCSB_buttonScrollRight"))};d.bind("mouseup touchend onmsgestureend mouseout",s);l.bind("mousedown touchstart onmsgesturestart",function(b){b.preventDefault();b.stopPropagation();c.data({mCSB_buttonScrollLeft:setInterval(function(){var b=Math.round((Math.abs(Math.round(a.position().left))-c.data("scrollButtons_scrollSpeed"))/c.data("scrollAmount")); c.mCustomScrollbar("scrollTo",b,{moveDragger:!0})},30)})});var j=function(a){a.preventDefault();a.stopPropagation();clearInterval(c.data("mCSB_buttonScrollLeft"))};l.bind("mouseup touchend onmsgestureend mouseout",j);c.data({bindEvent_buttonsContinuous_x:!0})}}else h.add(k).unbind("click"),c.data({bindEvent_buttonsPixels_y:!1}),c.data("bindEvent_buttonsContinuous_y")||(h.bind("mousedown touchstart onmsgesturestart",function(b){b.preventDefault();b.stopPropagation();c.data({mCSB_buttonScrollDown:setInterval(function(){var b= Math.round((Math.abs(Math.round(a.position().top))+c.data("scrollButtons_scrollSpeed"))/c.data("scrollAmount"));c.mCustomScrollbar("scrollTo",b,{moveDragger:!0})},30)})}),h.bind("mouseup touchend onmsgestureend mouseout",function(a){a.preventDefault();a.stopPropagation();clearInterval(c.data("mCSB_buttonScrollDown"))}),k.bind("mousedown touchstart onmsgesturestart",function(b){b.preventDefault();b.stopPropagation();c.data({mCSB_buttonScrollUp:setInterval(function(){var b=Math.round((Math.abs(Math.round(a.position().top))- c.data("scrollButtons_scrollSpeed"))/c.data("scrollAmount"));c.mCustomScrollbar("scrollTo",b,{moveDragger:!0})},30)})}),k.bind("mouseup touchend onmsgestureend mouseout",function(a){a.preventDefault();a.stopPropagation();clearInterval(c.data("mCSB_buttonScrollUp"))}),c.data({bindEvent_buttonsContinuous_y:!0}));c.data("autoScrollOnFocus")&&!c.data("bindEvent_focusin")&&(e.bind("focusin",function(){e.scrollTop(0).scrollLeft(0);var d=f(document.activeElement);if(d.is("input,textarea,select,button,a[tabindex],area,object"))if(c.data("horizontalScroll")){var j= a.position().left,h=d.position().left,k=e.width(),d=d.outerWidth();0<=j+h&&j+h<=k-d||(d=h/c.data("scrollAmount"),d>=g.width()-b.width()&&(d=g.width()-b.width()),b.css("left",d),c.mCustomScrollbar("scroll"))}else j=a.position().top,h=d.position().top,k=e.height(),d=d.outerHeight(),0<=j+h&&j+h<=k-d||(d=h/c.data("scrollAmount"),d>=g.height()-b.height()&&(d=g.height()-b.height()),b.css("top",d),c.mCustomScrollbar("scroll"))}),c.data({bindEvent_focusin:!0}));if(f(document).data("mCS-is-touch-device")){if(!c.data("bindEvent_scrollbar_touch")){var q, u;b.bind("touchstart onmsgesturestart",function(a){a.preventDefault();a.stopPropagation();var b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];a=f(this);var c=a.offset(),d=b.pageX-c.left,b=b.pageY-c.top;d<a.width()&&(0<d&&b<a.height()&&0<b)&&(q=b,u=d)});b.bind("touchmove onmsgesturechange",function(a){a.preventDefault();a.stopPropagation();var d=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],e=f(this).offset();a=d.pageX-e.left;d=d.pageY-e.top;c.data("horizontalScroll")? c.mCustomScrollbar("scrollTo",b.position().left-u+a,{moveDragger:!0}):c.mCustomScrollbar("scrollTo",b.position().top-q+d,{moveDragger:!0})});c.data({bindEvent_scrollbar_touch:!0})}if(!c.data("bindEvent_content_touch")){var r,w,t,x,y,z,A;a.bind("touchstart onmsgesturestart",function(a){r=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];w=f(this);t=w.offset();x=r.pageX-t.left;z=y=r.pageY-t.top;A=x});a.bind("touchmove onmsgesturechange",function(a){a.preventDefault();a.stopPropagation(); r=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];w=f(this).parent();t=w.offset();x=r.pageX-t.left;y=r.pageY-t.top;c.data("horizontalScroll")?c.mCustomScrollbar("scrollTo",A-x):c.mCustomScrollbar("scrollTo",z-y)});c.data({bindEvent_content_touch:!0})}}},scroll:function(e){var a=f(this),g=a.find(".mCSB_dragger"),b=a.find(".mCSB_container");a.find(".mCustomScrollBox");if(a.data("horizontalScroll"))var k=-g.position().left*a.data("scrollAmount"),h=b.position().left,h=Math.round(h-k);else var l= -g.position().top*a.data("scrollAmount"),d=b.position().top,d=Math.round(d-l);if(f.browser.webkit)var c=(window.outerWidth-8)/window.innerWidth,c=0.98>c||1.02<c;0===a.data("scrollInertia")||c?(e||a.mCustomScrollbar("callbacks","onScrollStart"),a.data("horizontalScroll")?b.css("left",k):b.css("top",l),e||(a.data("whileScrolling")&&a.data("whileScrolling_Callback").call(),a.mCustomScrollbar("callbacks","onScroll")),a.data({mCS_Init:!1})):(e||a.mCustomScrollbar("callbacks","onScrollStart"),a.data("horizontalScroll")? b.stop().animate({left:"-="+h},a.data("scrollInertia"),a.data("scrollEasing"),function(){e||a.mCustomScrollbar("callbacks","onScroll");a.data({mCS_Init:!1})}):b.stop().animate({top:"-="+d},a.data("scrollInertia"),a.data("scrollEasing"),function(){e||a.mCustomScrollbar("callbacks","onScroll");a.data({mCS_Init:!1})}))},scrollTo:function(e,a){a=f.extend({moveDragger:!1,callback:!0},a);var g=f(this),b,k=g.find(".mCustomScrollBox"),h=k.children(".mCSB_container"),l=g.find(".mCSB_draggerContainer"),d=l.children(".mCSB_dragger"); if(e||0===e)"number"===typeof e?b=a.moveDragger?e:Math.round(e/g.data("scrollAmount")):"string"===typeof e&&(b="top"===e?0:"bottom"===e&&!g.data("horizontalScroll")?h.outerHeight()-k.height():"left"===e?0:"right"===e&&g.data("horizontalScroll")?h.outerWidth()-k.width():"first"===e?g.find(".mCSB_container").find(":first"):"last"===e?g.find(".mCSB_container").find(":last"):g.find(e),1===b.length&&(b=g.data("horizontalScroll")?b.position().left:b.position().top,b=Math.ceil(b/g.data("scrollAmount")))), 0>b&&(b=0),g.data("horizontalScroll")?(b>=l.width()-d.width()&&(b=l.width()-d.width()),d.css("left",b)):(b>=l.height()-d.height()&&(b=l.height()-d.height()),d.css("top",b)),a.callback?g.mCustomScrollbar("scroll",!1):g.mCustomScrollbar("scroll",!0)},callbacks:function(e){var a=f(this),g=a.find(".mCustomScrollBox"),b=a.find(".mCSB_container");switch(e){case "onScrollStart":b.is(":animated")||a.data("onScrollStart_Callback").call();break;case "onScroll":a.data("horizontalScroll")?(e=Math.round(b.position().left), 0>e&&e<=g.width()-b.outerWidth()+a.data("onTotalScroll_Offset")?a.data("onTotalScroll_Callback").call():e>=-a.data("onTotalScroll_Offset")?a.data("onTotalScrollBack_Callback").call():a.data("onScroll_Callback").call()):(e=Math.round(b.position().top),0>e&&e<=g.height()-b.outerHeight()+a.data("onTotalScroll_Offset")?a.data("onTotalScroll_Callback").call():e>=-a.data("onTotalScroll_Offset")?a.data("onTotalScrollBack_Callback").call():a.data("onScroll_Callback").call());break;case "whileScrolling":a.data("whileScrolling_Callback")&& !a.data("whileScrolling")&&a.data({whileScrolling:setInterval(function(){b.is(":animated")&&!a.data("mCS_Init")&&a.data("whileScrolling_Callback").call()},a.data("whileScrolling_Interval"))})}},disable:function(e){var a=f(this),g=a.children(".mCustomScrollBox"),b=g.children(".mCSB_container"),k=g.children(".mCSB_scrollTools"),h=k.find(".mCSB_dragger");g.unbind("mousewheel focusin");e&&(a.data("horizontalScroll")?h.add(b).css("left",0):h.add(b).css("top",0));k.css("display","none");b.addClass("mCS_no_scrollbar"); a.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1}).addClass("mCS_disabled")},destroy:function(){var e=f(this),a=e.find(".mCSB_container").html();e.find(".mCustomScrollBox").remove();e.html(a).removeClass("mCustomScrollbar _mCS_"+f(document).data("mCustomScrollbar-index")).addClass("mCS_destroyed")}};f.fn.mCustomScrollbar=function(e){if(q[e])return q[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof e||!e)return q.init.apply(this,arguments);f.error("Method "+e+" does not exist")}})(jQuery); iOSVersion=iOSVersion(); 6<=iOSVersion&&function(f){function q(a,b,d){var e,g=d[0],j=a===k;d[0]=function(){g&&(g.apply(f,arguments),j||(delete b[e],g=null))};e=a.apply(f,d);b[e]={args:d,created:Date.now(),cb:g,id:e};return e}function e(a,b,d,e){function g(){j.cb&&(j.cb.apply(f,arguments),h||(delete d[e],j.cb=null))}var j=d[e];if(j){var h=a===k;b(j.id);if(!h){b=j.args[1];var l=Date.now()-j.created;0>l&&(l=0);b-=l;0>b&&(b=0);j.args[1]=b}j.args[0]=g;j.created=Date.now();j.id=a.apply(f,j.args)}}var a={},g={},b=f.setTimeout,k= f.setInterval,h=f.clearTimeout,l=f.clearInterval;if(!f.addEventListener)return!1;f.setTimeout=function(){return q(b,a,arguments)};f.setInterval=function(){return q(k,g,arguments)};f.clearTimeout=function(b){var d=a[b];d&&(delete a[b],h(d.id))};f.clearInterval=function(a){var b=g[a];b&&(delete g[a],l(b.id))};for(var d=f;d.location!=d.parent.location;)d=d.parent;d.addEventListener("scroll",function(){for(var c in a)e(b,h,a,c);for(c in g)e(k,l,g,c)})}(window); function iOSVersion(){var f=window.navigator.userAgent,q=f.indexOf("OS ");return(-1<f.indexOf("iPhone")||-1<f.indexOf("iPad"))&&-1<q?window.Number(f.substr(q+3,3).replace("_",".")):0} (function(f,q){var e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";f.fn.imagesLoaded=function(a){function g(){var b=f(m),d=f(n);l&&(n.length?l.reject(c,b,d):l.resolve(c));f.isFunction(a)&&a.call(h,c,b,d)}function b(a){k(a.target,"error"===a.type)}function k(a,j){a.src===e||-1!==f.inArray(a,p)||(p.push(a),j?n.push(a):m.push(a),f.data(a,"imagesLoaded",{isBroken:j,src:a.src}),d&&l.notifyWith(f(a),[j,c,f(m),f(n)]),c.length===p.length&&(setTimeout(g),c.unbind(".imagesLoaded", b)))}var h=this,l=f.isFunction(f.Deferred)?f.Deferred():0,d=f.isFunction(l.notify),c=h.find("img").add(h.filter("img")),p=[],m=[],n=[];f.isPlainObject(a)&&f.each(a,function(b,c){if("callback"===b)a=c;else if(l)l[b](c)});c.length?c.bind("load.imagesLoaded error.imagesLoaded",b).each(function(a,b){var c=b.src,d=f.data(b,"imagesLoaded");if(d&&d.src===c)k(b,d.isBroken);else if(b.complete&&b.naturalWidth!==q)k(b,0===b.naturalWidth||0===b.naturalHeight);else if(b.readyState||b.complete)b.src=e,b.src=c}): g();return l?l.promise(h):h}})(jQuery);


